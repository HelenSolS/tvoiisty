# 01. Объём MVP и этапы

## 1.1. Что такое «примерка» в MVP
«Примерка» = генерация **одной фотографии** результата на основе:
- `UserPhoto` — фото пользователя (селфи/полный рост).
- `Outfit` — готовая карточка образа, загруженная магазином (на одной картинке несколько вещей).
- `Location` — опциональный фон/локация, загруженная админом (10 штук доступны всем на старте).

Локация **не влияет** на стоимость токенов в MVP.

## 1.2. Минимальные пользовательские сценарии (MVP)
### A) Быстрая примерка
1) Пользователь открывает мини-апп.
2) Выбирает/загружает фото.
3) Выбирает образ.
4) (опционально) выбирает локацию.
5) Нажимает «Примерить».
6) Получает результат.
7) Может: скачать, поделиться, анимировать, перейти в магазин.

### B) Авторизация только в момент «Примерить»
- До нажатия «Примерить» пользователь может смотреть каталог, локации, интерфейс.
- При нажатии «Примерить» — если не авторизован через Telegram initData → требуется авторизация.
- После успешной авторизации примерка **продолжается без сброса** выбранных фото/образа/локации.

### C) Переход в магазин в любой момент
На каждом экране, где показан образ/результат:
- Кнопка «В магазин» ведёт по ссылке `Outfit.store_url` (с UTM).

### D) Анимация результата
- Анимация запускается **из результата** (фото-результат → видео).
- Оплата токенами выше, чем фото.

## 1.3. Минимальные сценарии магазина (MVP)
### A) Переход в режим магазина
- В профиле есть кнопка «Стать магазином».
- В MVP: заглушка подтверждения (экран “подтвердите через Т-Банк/Госуслуги”) → кнопка “Подтвердить” → статус `Store=Verified`.

### B) Загрузка образов
- Доступ к загрузке появляется только у `Store=Verified`.
- При загрузке образа:
  - обязательна проверка качества и приличности,
  - автоматическая генерация описания/тегов (чтобы не звать ИИ на каждый поиск).

### C) Статистика
Магазин видит по каждому образу:
- количество примерок,
- количество переходов в магазин.

## 1.4. Минимальные сценарии админа (MVP)
- CRUD локаций (загрузка, включение/выключение).
- Просмотр логов модерации.
- Управление фичефлагами (платежи/стилист/расширенные локации).

## 1.5. Фильтры каталога (MVP)
Нужны только 3–5 фильтров, чтобы не раздувать:
1) Пол: `женское / мужское / детское`.
2) Тип образа (категория): `платья / брюки / юбки / костюмы / обувь`.
3) Сезон: `лето / демисезон / зима` (можно как 3 значения или “не указано”).
4) Стиль: `casual / sport / classic / evening` (минимум 4, можно заглушкой на старте).
5) Поиск по ключевым словам (по описанию, тегам, названию).

## 1.6. Что НЕ делаем в MVP
- Реальная верификация магазинов через Т-Банк/Госуслуги.
- Платежи токенов (только учёт “в минус”, без покупки).
- Стилист (для человека и для магазина) — только API-заглушки и кнопки “Скоро”.
- Расширенная библиотека локаций и “10 избранных” (оставить в дизайне место, но реализацию отложить).
- Разбор образа на отдельные вещи.

## 1.7. Этапы разработки
### Этап 1 — MVP (обязательный минимум)
- Авторизация Telegram.
- Загрузка фото пользователя.
- Каталог образов + базовые фильтры.
- (опционально) выбор локации из 10.
- Примерка (AI pipeline) → результат.
- Кнопки: скачать, поделиться, в магазин, повторить.
- Модерация при загрузке (качество + NSFW).
- Статистика магазина.
- Автотесты на ключевые сценарии.

### Этап 2 — Анимация
- Запуск видео по результату.
- Очереди задач, статусы, ретраи.
- Учет токенов “только по completed”.

### Этап 3 — Постинг
- “Поделиться” в Telegram + подготовка media для соцсетей.
- UTM-трекинг.

### Этап 4 — Стилист
- Для магазина: генерация образов из фото вещей.
- Для пользователя: подбор 3–10 образов по запросу.

